{% extends 'core/base.html' %}
{% load static %}

{% block title %}Recuperar Acceso - Raíz Digital{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/variables.css' %}">
<link rel="stylesheet" href="{% static 'core/css/recovery.css' %}">
{% endblock %}

{% block content %}
<!-- Contenedor 3D -->
<div id="holographic-container"></div>

<!-- Interfaz principal -->
<div class="recovery-interface">
    <div class="glitch-scanner"></div>
    
    <!-- Portal holográfico -->
    <div class="holo-portal">
        <div class="holo-rings">
            <div class="ring"></div>
            <div class="ring"></div>
            <div class="ring"></div>
        </div>
        
        <div class="data-stream">
            <!-- Se llenará dinámicamente con JS -->
        </div>
    </div>

    <!-- Formulario con efecto holográfico -->
    <div class="recovery-container">
        <div class="holo-overlay"></div>
        <div class="glitch-text" data-text="Recuperación de Acceso">Recuperación de Acceso</div>
        
        <form id="recovery-form" class="neural-form">
            <div class="form-header">
                <div class="scan-line"></div>
                <div class="neural-dots">
                    {% for i in "123456"|make_list %}
                    <div class="dot"></div>
                    {% endfor %}
                </div>
            </div>

            <!-- Paso 1: Email -->
            <div class="form-step active" data-step="1">
                <div class="input-container">
                    <label class="cyber-label">Identificación Neural</label>
                    <input type="email" 
                           class="neural-input" 
                           placeholder="Ingresa tu email"
                           required>
                    <div class="neural-validation">
                        <div class="scan-bar"></div>
                        <div class="validation-text">Verificando identidad...</div>
                    </div>
                </div>
                <button type="button" class="next-step-btn">
                    <span class="btn-text">Iniciar Escaneo</span>
                    <div class="btn-particles"></div>
                </button>
            </div>

            <!-- Paso 2: Código de Verificación -->
            <div class="form-step" data-step="2">
                <div class="verification-grid">
                    {% for i in "123456"|make_list %}
                    <input type="text" 
                           class="code-input" 
                           maxlength="1" 
                           pattern="\d*">
                    {% endfor %}
                </div>
                <div class="time-remaining">
                    <svg class="timer-circle">
                        <circle r="24" cx="26" cy="26"></circle>
                    </svg>
                    <span class="timer-text">5:00</span>
                </div>
            </div>

            <!-- Paso 3: Nueva Contraseña -->
            <div class="form-step" data-step="3">
                <div class="password-container">
                    <input type="password" 
                           class="neural-input" 
                           placeholder="Nueva contraseña">
                    <div class="password-strength">
                        <div class="strength-bar"></div>
                        <div class="strength-text">Fuerza Neural: 0%</div>
                    </div>
                </div>
                <button type="submit" class="submit-btn">
                    <span class="btn-text">Recalibrar Acceso</span>
                    <div class="btn-holo"></div>
                </button>
            </div>
        </form>

        <!-- Visualización de datos -->
        <div class="data-visualization">
            <canvas id="dataCanvas"></canvas>
            <div class="data-metrics">
                <div class="metric">
                    <span class="label">Integridad</span>
                    <span class="value">98%</span>
                </div>
                <div class="metric">
                    <span class="label">Seguridad</span>
                    <span class="value">100%</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Efectos ambientales -->
<div class="ambient-effects">
    <div class="digital-rain"></div>
    <div class="grid-overlay"></div>
    <div class="noise-overlay"></div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
<script src="{% static 'core/js/recovery-effects.js' %}"></script>
<script src="{% static 'core/js/neural-interface.js' %}"></script>
<script src="{% static 'core/js/holographic-form.js' %}"></script>
{% endblock %}